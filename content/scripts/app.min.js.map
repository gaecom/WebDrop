{"version":3,"file":"scripts/app.min.js","sources":["scripts/controllers/fileCtrl.js","scripts/controllers/mainCtrl.js","scripts/controllers/roomCtrl.js","scripts/directives/fileoffer.js","scripts/app.js"],"names":["angular","module","controller","$scope","$routeParams","webdropMessage","messageType","messageData","webdropType","data","askForChunkWrapper","chunkIndex","askForChunk","chunkData","receivedChunkCount","fileRequest","metaData","chunkCount","chunkEndCallback","console","log","channel","channels","userId","send","fileId","chunkTimeout","setTimeout","getFileWrapper","callback","requestFileFailed","status","fileChunkReceived","fileData","receivedChunks","index","clearTimeout","fileProgress","remaining","received","length","i","fileChunkReceivedFailed","progress","type","fileMetaDataReceived","fileReceived","name","fileName","value","fileUrl","join","save","document","createElement","href","target","download","evt","createEvent","initMouseEvent","window","dispatchEvent","URL","webkitURL","revokeObjectURL","$apply","packets","now","Date","startTime","ellapsed","transferSpeed","size","bytesPerMillisecond","chunkSize","kiloBytesPerSecond","toFixed","parseInt","roomCode","DataChannel","transmitRoomOnce","autoCloseEntireSession","openSignalingChannel","config","this","sender","Math","round","random","io","connect","emit","socket","on","message","onmessage","messageRouter","fileRequestFailed","fileRequestMetaData","fileRequestChunk","fileRequestChunkFailed","onopen","rawChannel","JSON","stringify","onleave","onclose","event","onerror","$location","joinRoom","path","roomToJoin","newRoom","removeUser","connectedUsers","addUser","nickName","pushToMessages","nick","messages","push","from","text","requestMetaData","offeredFiles","file","chunks","requestChunk","fileDescriptor","currentUserId","sendMessage","messageToSend","userid","directive","scope","link","el","attrs","getChunks","result","numberOfChunks","ceil","substring","fileOffer","bind","files","reader","FileReader","onload","e","readAsDataURL","$routeProvider","when","templateUrl","otherwise","redirectTo"],"mappings":"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"}